# Firebase

Flood provides seamless integration with [Firebase](https://www.firebase.com/), allowing you to easily incorporate Firebase services into your Flutter application. This documentation will guide you through the process of setting up Firebase in your Flood project and utilizing its various features.

## Initialization

To get started with Firebase in your Flood project, follow these steps:

1. Create a Firebase project in the [Firebase Console](https://console.firebase.google.com/).

2. Use the [flutterfire_cli](https://pub.dev/packages/flutterfire_cli) CLI tool to configure the connection to your Firebase project. Run the following command in your terminal:

    ```bash
    flutterfire configure
    ```

    This command will guide you through the process of connecting your Flutter app to your Firebase project.

3. Create your Firestore database in the Firebase Console. Navigate to the "Firestore Database" section and follow the prompts to create a new database.

4. Enable Email/Password authentication in the Firebase Console. Go to the "Authentication" section, select the "Sign-in method" tab, and enable the "Email/Password" provider.

## Usage

To initialize the connection to Firebase in your Flood project, add the `FirebaseCoreComponent` as one of the `initialCoreComponents` in the [FloodCoreComponent](/pond/core):

```dart
FloodCoreComponent(
  initialCoreComponents: [
    FirebaseCoreComponent(),
    // ... other initial components
  ],
  // ... other configuration
)
```

This will ensure that the connection to Firebase is established before the rest of the `CorePondComponent`s are registered.

## Authentication

Flood's [Auth Module](/auth) integrates with Firebase Authentication to provide secure user authentication in your app.

### Admin Accounts

In Firebase, accounts are considered "admins" if they have a custom claim titled "admin". To set this custom claim on specific accounts, you need to create a Firebase Function and execute it manually.

### Usage

To use Firebase Authentication in your Flood project, add the `FirebaseAuthServiceImplementation` as one of the `authServiceImplementations` in the `FloodCoreComponent`:

```dart
FloodCoreComponent(
  authServiceImplementations: [
    FirebaseAuthServiceImplementation(),
    // ... other auth service implementations
  ],
  // ... other configuration
)
```

This will configure Firebase Authentication as the implementation for the `AuthService.static.cloud()` method, enabling Firebase Authentication in cloud environments.

## Firestore

Flood seamlessly integrates with Firestore, allowing you to store and retrieve data from your Firestore database. It also provides powerful automation capabilities to streamline your development workflow.

### Usage

To use Firestore as the implementation for your repositories in cloud environments, add the `FirebaseCloudRepositoryImplementation` as one of the `repositoryImplementations` in the `FloodCoreComponent`:

```dart
FloodCoreComponent(
  repositoryImplementations: [
    FirebaseCloudRepositoryImplementation(),
    // ... other repository implementations
  ],
  // ... other configuration
)
```

This will configure Firestore as the implementation for the `Repository.cloud()` method, enabling Firestore as the data storage solution in cloud environments.

### Automatic Firestore Security Rules Generation and Deployment

Flood's [Automate Module](/automate) provides a convenient way to automatically generate Firestore security rules based on your [Drop](/drop) repositories and deploy them directly to your Firebase project.

To generate and deploy Firestore security rules, run the following command:

```
dart tool/automate.dart deploy production
```

This command will analyze your Drop repositories, generate the corresponding Firestore security rules, and deploy them to your Firebase project associated with the "production" environment.

The generated security rules will be based on the access control and validation logic defined in your Drop repositories, ensuring that your Firestore data is properly secured and follows the specified rules.

## Firebase Crashlytics

Flood integrates with Firebase Crashlytics to capture and report crashes and errors in your app.

### Usage

When you use the [FloodAppComponent](/pond/app) in your Flood project, Firebase Crashlytics integration is automatically added. The Flood framework pulls logs from the [Log Module](/logs) and sets the Firebase Crashlytics user identifier to the currently logged-in user from the Auth module.

To ensure that Firebase Crashlytics is properly set up, make sure you have added the necessary dependencies and configuration files to your project as per the Firebase Crashlytics documentation.

---

By following this documentation and leveraging the provided components and implementations, you can easily integrate Firebase into your Flood project and take advantage of its authentication, database, messaging, and crashlytics features.

Remember to handle sensitive information securely and follow best practices when working with Firebase and user data.
